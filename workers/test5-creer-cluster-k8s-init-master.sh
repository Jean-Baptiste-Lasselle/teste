#!/bin/bash

# --------------------------------------------------------------------------------------------------------------------------------------------
##############################################################################################################################################
################                                                ENVIRONNEMENT                                            #####################
##############################################################################################################################################
# --------------------------------------------------------------------------------------------------------------------------------------------

# export MAISON=`pwd`
# export ADRESSE_IP_K8S_API_SERVER_PAR_DEFAUT=0.0.0.0
# export NO_PORT_IP_K8S_API_SERVER_PAR_DEFAUT=6443
# export VERSION_K8S_PAR_DEFAUT=v1.11.0

# --------------------------------------------------------------------------------------------------------------------------------------------
##############################################################################################################################################
################                                                OPERATIONS                                               #####################
##############################################################################################################################################
# --------------------------------------------------------------------------------------------------------------------------------------------

clear

echo " ---------------------------------------------------- "
echo " ---------------------------------------------------- "
echo " ---------------------------------------------------- "
echo " ------------ PROVISION TERMINEE : ---------------- "
echo " ------------ ++ kubeadm ---------------- "
echo " ------------ ++ kubectl ---------------- "
echo " ------------ ++ kubelet ---------------- "
echo " ---------------------------------------------------- "
echo " ---------------------------------------------------- "
echo " ---------------------------------------------------- "

KUBEADM_OPTS="--apiserver-advertise-address=$ADRESSE_IP_K8S_API_SERVER --apiserver-bind-port=$NO_PORT_IP_K8S_API_SERVER"
kubeadm init $KUBEADM_OPTS --kubernetes-version=$VERSION_K8S

